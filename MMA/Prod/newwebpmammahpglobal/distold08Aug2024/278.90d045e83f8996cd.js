"use strict";(self.webpackChunknewwebpmammahp=self.webpackChunknewwebpmammahp||[]).push([[278],{3525:(P,_,c)=>{c.d(_,{F:()=>x});var m=c(2340),g=c(4893),e=c(520);let x=(()=>{class d{constructor(i){this.http=i}getSurveyDetailsbyQRCode(i){return this.http.get(`${m.N.BlueNumberDataReqAPI}/api/v1/DataRequest/QRCode/${i}`)}getSurveyDetailsResponseForAnsweredQRCode(i){return this.http.get(`${m.N.BlueNumberDataReqAPI}/api/v1/DataRequest/ResponseOnly/QRCode/${i}`)}getSurveyGroupByQRCode(i){return this.http.get(`${m.N.BlueNumberDataReqAPI}/api/v1/DataRequest/SurveyGroupStateBySS/QRCode/${i}`)}getSurveyResponseCount(i,C){return this.http.get(`${m.N.BlueNumberDataReqAPI}/api/v1/DataRequest/SurveyGroupResponseCount/QRCode/${i}/${C}`)}getDataRequesDetailsById(i){return this.http.get(`${m.N.BlueNumberDataReqAPI}/api/v1/DataRequest/${i}`)}saveSurveyResponse(i){return this.http.post(`${m.N.BlueNumberDataReqAPI}/api/v1/DataRequestResponse`,i)}checkSurveyIsValidOrNot(i,C,D){return this.http.get(`${m.N.BluenumberSurveyOTPValidationUrl}/api/check_qualification.php?api_key=bluenumbermmtestapi2023&r_id=${i}&q_id=${C}&s_id=${D}&env=${m.N.envType}`)}getConnectionRequestDetailsByCode(i){return this.http.get(`${m.N.BlueNumberGlobalAPI}/api/v1/ConnectionRequestCode/Bluenumber/${i}`)}}return d.\u0275fac=function(i){return new(i||d)(g.\u0275\u0275inject(e.eN))},d.\u0275prov=g.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},7278:(P,_,c)=>{c.r(_),c.d(_,{MySurveysModule:()=>L});var m=c(9808),g=c(6696),e=c(4893);let x=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-survey-layout"]],decls:1,vars:0,template:function(t,r){1&t&&e.\u0275\u0275element(0,"router-outlet")},directives:[g.lC],styles:[""]}),n})();var d=c(7445),f=c(7432),i=c(3525),C=c(7420);function D(n,l){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275element(3,"br"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),r=t.index,s=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2(" ",r+1," ",o.getNumberSuffix(r+1)," Day "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null!=s&&s.isAnswered?"DONE!":""," ")}}function w(n,l){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Qualified"),e.\u0275\u0275elementEnd())}function I(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2),r=t.index,s=t.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" ",r," ",o.getNumberSuffix(r)," Day "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null!=s&&s.isAnswered?"DONE!":""," ")}}function T(n,l){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,w,2,0,"span",19),e.\u0275\u0275template(2,I,4,3,"span",19),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().index;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!=t)}}function k(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",22),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(3,3,null==t?null:t.answeredTime,"dd MMM y")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2(" ",null==t?null:t.location[0],", ",null==t?null:t.location[1]," ")}}function E(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",17)(1,"div")(2,"div",18),e.\u0275\u0275template(3,D,5,3,"ng-container",19),e.\u0275\u0275template(4,T,3,2,"ng-container",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,k,6,6,"div",20),e.\u0275\u0275elementEnd()),2&n){const t=l.$implicit,r=l.index,s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",0==r?null!=t&&t.isAnswered?"circle-final-active":"circle-first-active":s.currentSurveyIndex==r&&(null==t||!t.isAnswered)&&s.surveyState<=3?"common-circle-top circle-first-active":null!=t&&t.isAnswered?"common-circle-top circle-final-active":"common-circle-top circle-inactive"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.isEachClaimSurvey),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!s.isEachClaimSurvey),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t?null:t.answeredTime)}}const R=[{path:"",component:x,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(t,r,s){this.surveyService=t,this.sharedService=r,this.router=s,this.globalConstants=f.Z,this.streakDays=[],this.surveyDetails=[],this.surveyMsg="",this.surveyState=0,this.currentSurveyIndex=0,this.firstSurveyAnswered=!1,this.surveyType="",this.claimType="",this.isEachClaimSurvey=!1}ngOnInit(){this.surveyType=localStorage.getItem("surveyType"),this.claimType=localStorage.getItem("claim"),this.isEachClaimSurvey=this.surveyType==f.Z.shareQrCode&&this.claimType==f.Z.eachSurvey,this.getSurveyListDetails()}getSurveyListDetails(){this.sharedService.startLoader(),("null"==localStorage.getItem("ssid")||""==localStorage.getItem("ssid"))&&(this.sharedService.successErrorMsg.message="Please scan QR code again.",this.sharedService.successErrorMsg.showAcceptReject=!1,this.sharedService.successErrorMsg.showProceed=!1,this.router.navigateByUrl("home/messages")),this.surveyService.getSurveyGroupByQRCode(localStorage.getItem("ssid")).subscribe(t=>{if(this.sharedService.stopLoader(),!t.isError){if(this.surveyDetails=t.result,localStorage.setItem("surveySetId",this.surveyDetails.id),null==this.surveyDetails||this.surveyDetails.surveyGroupItems.length<=0)return this.surveyState=1,void(this.surveyMsg="Surveys are not available");this.surveyDetails.surveyGroupItems.forEach((a,v)=>{0==v&&a.isAnswered&&(this.firstSurveyAnswered=!0)});let r=new Date;r.setHours(0,0,0,0);let s=new Date(this.surveyDetails.endDate);s=new Date(s.getTime()+6e4*s.getTimezoneOffset()),console.log("DATE: ",s);let o=s-r;if(console.log(o),o<0)return this.surveyState=2,void(this.surveyMsg="Survey program ended. We will notify when next program available.");if(0==o&&1==this.surveyDetails.surveyGroupItems[this.surveyDetails.surveyGroupItems.length-1].isAnswered)return this.surveyState=2,void(this.surveyMsg="Survey program ended. We will notify when next program available.");if(this.sortSuveys(),"Hourly"!=this.surveyDetails.type)this.dailySurveySSIDDetails(r);else{let a=new Date;a=new Date(a.getTime()+6e4*a.getTimezoneOffset());let v=new Date(this.surveyDetails.startDate);v=new Date(v.getTime()+6e4*v.getTimezoneOffset());let p=new Date(this.surveyDetails.endDate);p=new Date(p.getTime()+6e4*p.getTimezoneOffset());let y=new Date(this.surveyDetails.surveyGroupItems[0].startDate);y=new Date(y.getTime()+6e4*y.getTimezoneOffset()),y.setHours(0,0,0,0);for(let u=0;u<this.surveyDetails.surveyGroupItems.length;u++)if(!this.surveyDetails.surveyGroupItems[u].isAnswered){if(this.currentSurveyIndex=u,v-a==0){this.surveyState=3,this.surveyMsg="New survey is available!";break}if(p-a>=0){let M,S,O,B=this.surveyDetails.minutesDifference;if(M=this.surveyDetails.surveyGroupItems[u-1],M&&M.answeredTime){S=new Date(M.answeredTime),S=new Date(S.getTime()+6e4*S.getTimezoneOffset()),O=new Date(S.getTime()+60*Number(B)*1e3);let b=O-a;if(b<=0)this.surveyState=3,this.surveyMsg="New survey is available!";else if(b>0){this.surveyState=4,this.showHourlySurveyCounter(O);break}}else this.surveyState=3,this.surveyMsg="New survey is available!";break}return}}}},t=>{"Survey is not found for QR:null"!=t.error.responseException.exceptionMessage?console.log("Error: ",t):this.router.navigateByUrl("home/info")})}dailySurveySSIDDetails(t){for(let r=0;r<this.surveyDetails.surveyGroupItems.length;r++){let s=this.surveyDetails.surveyGroupItems[r];if(0==s.isAnswered){let o=new Date(s.startDate);o=new Date(o.getTime()+6e4*o.getTimezoneOffset()),o.setHours(0,0,0,0);let a=o-t;if(0==a){this.surveyState=3,this.surveyMsg="New survey is available!";break}if(a>0){this.surveyState=4,this.showCounter(s.startDate);break}}}}showHourlySurveyCounter(t){this.timerSubscription=(0,d.F)(1e3).subscribe(r=>{let s,a=0,v=0,p=0,y=0;s=new Date;let u=new Date;u=new Date(u.getTime()+6e4*u.getTimezoneOffset());let h=t-u;h<=0&&this.clearCounter(),a=Math.floor(h/864e5),v=Math.floor(h%864e5/36e5),p=Math.floor(h%36e5/6e4),y=Math.floor(h%6e4/1e3),this.timeCounter=v+"hrs : "+p+"min : "+y+"secs"})}sortSuveys(){return this.surveyDetails.surveyGroupItems.sort((t,r)=>new Date(t.startDate)-new Date(r.startDate))}getNumberSuffix(t){return 1==t?"st":2==t?"nd":3==t?"rd":"th"}showCounter(t){this.timerSubscription=(0,d.F)(1e3).subscribe(r=>{let s,o,a=0,v=0,p=0,y=0;s=new Date,o=new Date(t),o.setHours(0,0,0,0);let u=o-s;u<=0&&this.clearCounter(),a=Math.floor(u/864e5),v=Math.floor(u%864e5/36e5),p=Math.floor(u%36e5/6e4),y=Math.floor(u%6e4/1e3),this.timeCounter=a+"Days : "+v+"Hours : "+p+"Minutes : "+y+"Seconds"})}clearCounter(){this.timerSubscription&&this.timerSubscription.unsubscribe(),this.surveyState=3,this.surveyMsg="New survey is available!"}goBack(){this.router.navigateByUrl("home/info")}getSurveyStyles(){if(this.surveyDetails&&this.surveyDetails.surveyGroupItems){let t=this.surveyDetails.surveyGroupItems.length;if(t<=1)return"height: 0%";{let r=0;return this.surveyDetails.surveyGroupItems.forEach((s,o)=>{o+1<t&&s.isAnswered&&(r+=170)}),`height: ${r}px`}}return"height: 0%"}getVerticalLineStyle(){if(this.surveyDetails&&this.surveyDetails.surveyGroupItems){let t=this.surveyDetails.surveyGroupItems.length;return t<=1?"height: 0%":`height: ${120*t+30*(t-1)}px`}return"height: 0%"}ngOnDestroy(){this.timerSubscription&&this.timerSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(i.F),e.\u0275\u0275directiveInject(C.F),e.\u0275\u0275directiveInject(g.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-survey-list"]],decls:20,vars:6,consts:[[1,"pma"],[1,"container"],[1,"my_streaks","mb-5","pb-5"],[1,"row","mb-4"],[1,"col-12","d-flex","align-items-center","justify-content-between"],[1,"pma-heading","text-gray-1"],[1,"fas","fa-chevron-left","mouse-pointer","pe-3",3,"click"],[1,"d-flex","justify-content-end"],["src","../../../../../assets/media/MMlogo-svg.svg","alt","","width","52px","height","auto",1,"img-fluid"],[1,"row"],[1,"col-md-6"],[1,"d-flex","justify-content-center","mt-4"],[1,"position-relative","left-51"],[1,"positioning"],["class","d-flex align-items-center justify-content-between",4,"ngFor","ngForOf"],[1,"vertical-line"],[3,"ngClass"],[1,"d-flex","align-items-center","justify-content-between"],[1,"common-circle",3,"ngClass"],[4,"ngIf"],["class","survey-timedate-fs",4,"ngIf"],[1,"survey-timedate-fs"],[1,"text-truncate","text-wrap"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h1",5)(7,"i",6),e.\u0275\u0275listener("click",function(){return r.goBack()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275text(9,"My Surveys"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275element(11,"img",8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13),e.\u0275\u0275template(17,E,6,4,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",15),e.\u0275\u0275element(19,"div",16),e.\u0275\u0275elementEnd()()()()()()()()),2&t&&(e.\u0275\u0275advance(17),e.\u0275\u0275property("ngForOf",null==r.surveyDetails?null:r.surveyDetails.surveyGroupItems),e.\u0275\u0275advance(1),e.\u0275\u0275styleMap(r.getVerticalLineStyle()),e.\u0275\u0275advance(1),e.\u0275\u0275styleMap(r.getSurveyStyles()),e.\u0275\u0275property("ngClass",r.firstSurveyAnswered?"vertical-line-progress":"line-border"))},directives:[m.sg,m.mk,m.O5],pipes:[m.uU],styles:[".pma[_ngcontent-%COMP%]{padding-top:16px}.pma[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.pma-heading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#545454!important}.pma-heading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ad0c62!important}.pma[_ngcontent-%COMP%]   .btn-mm-p[_ngcontent-%COMP%]{background-color:#ad0c62;font-size:16px;cursor:pointer;border-radius:10px;color:#fff;font-weight:500;padding:10px 104px!important;width:100%}.pma[_ngcontent-%COMP%]   .btn-mm-p[_ngcontent-%COMP%]:hover{opacity:.9}.pma[_ngcontent-%COMP%]   .succ-mes[_ngcontent-%COMP%]{font-size:50px!important;font-weight:500!important}.pma[_ngcontent-%COMP%]   .thankyou-text[_ngcontent-%COMP%]{font-family:Lato;font-style:normal;font-weight:300;font-size:18px;line-height:22px;text-align:center;color:#545454}.progress-bar[_ngcontent-%COMP%]{background-color:#ad0c62!important}.progress[_ngcontent-%COMP%]{height:10px!important}.form-control[_ngcontent-%COMP%]{height:50px!important;font-size:20px}input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-size:25px}.custom-control-label[_ngcontent-%COMP%]:after, .custom-control-label[_ngcontent-%COMP%]:before{width:2.5rem!important;height:2.5rem!important}.custom-control-label[_ngcontent-%COMP%]{padding-left:2.5rem!important;margin:10px 0}.custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:#ad0c62!important;border-color:#ad0c62!important}.pma-buttons[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Lato;font-style:normal;font-weight:500;font-size:20px;line-height:24px;text-align:center}.my_streaks[_ngcontent-%COMP%]   .my_streaks-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;display:inline-block}.my_streaks[_ngcontent-%COMP%]   .survey-heading[_ngcontent-%COMP%]{color:#ad0c62;font-size:24px}.my_streaks[_ngcontent-%COMP%]   .vertical-line[_ngcontent-%COMP%]{height:870px;width:30px;background-color:#d9d9d9;border-radius:50px}.my_streaks[_ngcontent-%COMP%]   .line-border[_ngcontent-%COMP%]{border-radius:50px}.my_streaks[_ngcontent-%COMP%]   .vertical-line-progress[_ngcontent-%COMP%]{border-radius:50px;background-color:#af2a74}.my_streaks[_ngcontent-%COMP%]   .completed-verticalline-bg[_ngcontent-%COMP%]{background-color:#18ba32}.my_streaks[_ngcontent-%COMP%]   .common-circle[_ngcontent-%COMP%]{border-radius:50%;width:120px;height:120px;display:flex;justify-content:center;align-items:center;align-content:center;font-size:14px}.my_streaks[_ngcontent-%COMP%]   .common-circle-top[_ngcontent-%COMP%]{margin-top:30px!important}.my_streaks[_ngcontent-%COMP%]   .circle-first-active[_ngcontent-%COMP%]{background-color:#af2a74;border:15px solid #CA5797;color:#fff}.my_streaks[_ngcontent-%COMP%]   .circle-final-active[_ngcontent-%COMP%]{background-color:#a31664;border:15px solid #C11374;color:#fff}.my_streaks[_ngcontent-%COMP%]   .circle-inactive[_ngcontent-%COMP%]{background-color:#e9e8e8;border:15px solid #F1F0F0;color:#000}.my_streaks[_ngcontent-%COMP%]   .circle-completed[_ngcontent-%COMP%]{background-color:#18ba32;border:15px solid #7ADF8A}.my_streaks[_ngcontent-%COMP%]   .positioning[_ngcontent-%COMP%]{position:absolute;top:0;left:0;margin-left:-46px;right:0}.my_streaks[_ngcontent-%COMP%]   .left-51[_ngcontent-%COMP%]{left:-51px}.my_streaks[_ngcontent-%COMP%]   .survey-timedate-fs[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:19px;max-width:100%}.my_streaks[_ngcontent-%COMP%]   .survey-timedate-fs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}.my_streaks[_ngcontent-%COMP%]   .survey-timedate-fs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{width:100px}.my_streaks[_ngcontent-%COMP%]   .survey-timedate-fs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{width:140px}.my_streaks[_ngcontent-%COMP%]   .text-lightgrey[_ngcontent-%COMP%]{color:#545454!important}"]}),n})()},{path:"**",redirectTo:"list",pathMatch:"full"}]}];let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[g.Bz.forChild(R)],g.Bz]}),n})();var A=c(4466);let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[m.ez,N,A.m]]}),n})()}}]);