"use strict";(self.webpackChunknewwebpmammahp=self.webpackChunknewwebpmammahp||[]).push([[166],{8166:(B,l,r)=>{r.r(l),r.d(l,{ClaimsModule:()=>k});var c=r(9808),a=r(6696),e=r(4893),m=r(7420),u=r(3525),d=r(2340),p=r(520);let v=(()=>{class n{constructor(t){this.http=t}claimSurveySet(t){return this.http.post(`${d.N.BlueNumberDataReqAPI}/api/v1/PaymentRequest/SurveyGroupSet`,t)}claimSurvey(t){return this.http.post(`${d.N.BlueNumberDataReqAPI}/api/v1/PaymentRequest/Survey`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(p.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=r(1413);function h(n,i){1&n&&e.\u0275\u0275element(0,"img",15)}function y(n,i){1&n&&e.\u0275\u0275element(0,"img",16)}function g(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,h,1,0,"img",13),e.\u0275\u0275template(2,y,1,0,"img",14),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isAllSurveysAnswered),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isAllSurveysAnswered)}}function x(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"img",17),e.\u0275\u0275elementStart(2,"h2",18),e.\u0275\u0275text(3," Success!"),e.\u0275\u0275elementEnd()())}function S(n,i){1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1,"You can only claim "),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3," payment upon completion "),e.\u0275\u0275element(4,"br"),e.\u0275\u0275text(5," of the last survey! "),e.\u0275\u0275elementEnd())}function C(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1,"Congratulations! You have "),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3," finished all Surveys! "),e.\u0275\u0275text(4," Click on "),e.\u0275\u0275element(5,"br"),e.\u0275\u0275text(6," the Pay Me button and Receive "),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"span",21),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(10," within 3 business days. "),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate2("",null==t.surveyDetails?null:t.surveyDetails.currency," ",null==t.surveyDetails?null:t.surveyDetails.paymentOffered,"")}}function _(n,i){1&n&&(e.\u0275\u0275elementStart(0,"h3",22),e.\u0275\u0275text(1,"Congratulations! You have "),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3," completed your "),e.\u0275\u0275element(4,"br"),e.\u0275\u0275text(5," registration! You will receive your payment "),e.\u0275\u0275element(6,"br"),e.\u0275\u0275text(7," within 3 business days. "),e.\u0275\u0275elementEnd())}function I(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",19),e.\u0275\u0275template(1,S,6,0,"h3",4),e.\u0275\u0275template(2,C,11,2,"h3",4),e.\u0275\u0275template(3,_,8,0,"h3",20),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isAllSurveysAnswered),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isAllSurveysAnswered&&"mmind"!=t.appId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isAllSurveysAnswered&&"mmind"==t.appId)}}function b(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",19)(1,"h3"),e.\u0275\u0275text(2," Thank you for answering this survey. "),e.\u0275\u0275element(3,"br"),e.\u0275\u0275text(4," Click on pay me button and receive "),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"span",21),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(8," in 3 business days. "),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate2(" ",null==t.surveyDetails?null:t.surveyDetails.currency," ",null==t.surveyDetails?null:t.surveyDetails.paymentOffered," ")}}function w(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",8)(1,"div",9)(2,"div",10),e.\u0275\u0275template(3,g,3,2,"div",4),e.\u0275\u0275template(4,x,4,0,"div",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",11),e.\u0275\u0275template(6,I,4,3,"div",12),e.\u0275\u0275template(7,b,9,2,"div",12),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","feedback"!=t.surveyType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","feedback"==t.surveyType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","feedback"!=t.surveyType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","feedback"==t.surveyType)}}function M(n,i){1&n&&(e.\u0275\u0275elementStart(0,"p",27),e.\u0275\u0275text(1,"Click on Pay Me button"),e.\u0275\u0275elementEnd())}function P(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",23)(1,"div",24),e.\u0275\u0275template(2,M,2,0,"p",25),e.\u0275\u0275elementStart(3,"button",26),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).onPayMeOrOkBtnClick()}),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isAllSurveysAnswered&&"feedback"!=t.surveyType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.isAllSurveysAnswered?"Pay Me":"Okay"," ")}}function O(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",28)(1,"div",10)(2,"div",29)(3,"div",30)(4,"div",22)(5,"h5",31),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"h1"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"p",32),e.\u0275\u0275text(10,"You have claimed "),e.\u0275\u0275elementStart(11,"span",21),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"p",33),e.\u0275\u0275text(14," Payment will be made to "),e.\u0275\u0275element(15,"br"),e.\u0275\u0275elementStart(16,"span",21),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"br"),e.\u0275\u0275text(19," as a virtual/mobile gift card "),e.\u0275\u0275element(20,"br"),e.\u0275\u0275text(21," (redeemable stored value code). "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"div",34)(23,"div",24)(24,"button",26),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).goBack()}),e.\u0275\u0275text(25," Okay "),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("",null==t.surveyDetails?null:t.surveyDetails.currency," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.surveyDetails?null:t.surveyDetails.paymentOffered),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2(" ",null==t.surveyDetails?null:t.surveyDetails.currency," ",null==t.surveyDetails?null:t.surveyDetails.paymentOffered,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.personMobileNumber," ")}}function D(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,w,8,4,"div",5),e.\u0275\u0275template(2,P,5,2,"div",6),e.\u0275\u0275template(3,O,26,5,"div",7),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isPaymentClaimed),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isPaymentClaimed),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isPaymentClaimed)}}const A=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-claims-layout"]],decls:1,vars:0,template:function(t,s){1&t&&e.\u0275\u0275element(0,"router-outlet")},directives:[a.lC],styles:[""]}),n})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(t,s,o,L,R){this.router=t,this.sharedService=s,this.surveyService=o,this.claimsService=L,this.dashboardService=R,this.surveyDetails={},this.isAllSurveysAnswered=!1,this.isSidOrSSId="",this.allSurveyIds=[],this.isPaymentClaimed=!1,this.appId="",this.isScreenLoaded=!1}ngOnInit(){let t=localStorage.getItem("sid"),s=localStorage.getItem("ssid");this.surveyType=localStorage.getItem("surveyType"),""!=t&&"null"!=t&&null!=t&&(this.isSidOrSSId="sid"),""!=s&&"null"!=s&&null!=s&&(this.isSidOrSSId="ssid"),this.personMobileNumber=localStorage.getItem("personMobileNumber"),this.appId=localStorage.getItem("app"),this.fetchProfileDetails(),"sid"==this.isSidOrSSId?this.getSurveyListDetails():"ssid"==this.isSidOrSSId&&this.getSurveySetDetails()}fetchProfileDetails(){this.dashboardService.getProfileDetails(localStorage.getItem("personBluenumber")).subscribe(t=>{this.sharedService.stopLoader(),t.isError||(this.profileInfo=t.result)})}getSurveySetDetails(){this.sharedService.startLoader(),"null"==localStorage.getItem("ssid")&&(this.sharedService.successErrorMsg.message="Please scan QR code again.",this.sharedService.successErrorMsg.showAcceptReject=!1,this.sharedService.successErrorMsg.showProceed=!1,this.router.navigateByUrl("home/messages")),this.surveyService.getSurveyGroupByQRCode(localStorage.getItem("ssid")).subscribe(t=>{if(this.sharedService.stopLoader(),this.isScreenLoaded=!0,!t.isError){this.surveyDetails=t.result,localStorage.setItem("surveySetId",this.surveyDetails.id),this.isPaymentClaimed=t.result.claim;let s=0;if(this.surveyDetails.surveyGroupItems.forEach(o=>{this.surveyDetails.currency=o.currency,this.surveyDetails.paymentOffered=o.paymentOffered,this.allSurveyIds.push(o.surveyId),o.isAnswered&&s++}),s==this.surveyDetails.surveyGroupItems.length&&0!=s)return void(this.isAllSurveysAnswered=!0);this.isAllSurveysAnswered=!1}},t=>{"Survey is not found for QR:null"!=t.error.responseException.exceptionMessage?console.log("Error: ",t):this.goBack()})}getSurveyListDetails(){this.sharedService.startLoader(),this.surveyService.getSurveyDetailsbyQRCode(localStorage.getItem("sid")).subscribe(t=>{t.isError||(this.surveyDetails=t.result,this.isPaymentClaimed=t.result.claim),this.sharedService.stopLoader(),this.isScreenLoaded=!0},t=>(this.fetchSurveyAmountDetails(),this.router.navigateByUrl("/claims"),"AlreadyAnswered"==t.error.responseException.exceptionMessage.substring(0,15)?void(this.isAllSurveysAnswered=!0):(t.error.responseException.exceptionMessage.includes("ReachedMaxParticipants"),void(this.isAllSurveysAnswered=!1))))}fetchSurveyAmountDetails(){this.sharedService.startLoader(),this.surveyService.getSurveyDetailsResponseForAnsweredQRCode(localStorage.getItem("sid")).subscribe(t=>{this.sharedService.stopLoader(),this.isScreenLoaded=!0,t.isError||(this.surveyDetails=t.result,this.isPaymentClaimed=t.result.claim)})}onPayMeOrOkBtnClick(){if(this.isAllSurveysAnswered){let t={};"sid"==this.isSidOrSSId?(t={surveyId:this.surveyDetails.id,amount:Number(this.surveyDetails.paymentOffered),latitude:this.profileInfo.latitude,longitude:this.profileInfo.longitude},this.sharedService.startLoader(),this.claimsService.claimSurvey(t).subscribe(s=>{this.sharedService.stopLoader(),console.log(s),s.isError||(this.isPaymentClaimed=!0)})):"ssid"==this.isSidOrSSId&&(this.sharedService.startLoader(),t={surveySetId:this.surveyDetails.id,dataRequestIds:this.allSurveyIds,amount:Number(this.surveyDetails.paymentOffered),latitude:this.profileInfo.latitude,longitude:this.profileInfo.longitude},this.claimsService.claimSurveySet(t).subscribe(s=>{this.sharedService.stopLoader(),console.log(s),s.isError||(this.isPaymentClaimed=!0)}))}else this.goBack()}goBack(){this.router.navigateByUrl("home/info")}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(a.F0),e.\u0275\u0275directiveInject(m.F),e.\u0275\u0275directiveInject(u.F),e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(f.s))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-claim-info"]],decls:6,vars:1,consts:[[1,"pma"],[1,"container"],[1,"pma-heading","text-muted","mb-4"],[1,"fas","fa-chevron-left","mouse-pointer","pr-3",3,"click"],[4,"ngIf"],["class","pay-screen mt-5 pt-5",4,"ngIf"],["class","row text-center p-4 bottom-position",4,"ngIf"],["class","row cont-cent mt-5",4,"ngIf"],[1,"pay-screen","mt-5","pt-5"],[1,"row","text-center"],[1,"col-md-12"],[1,"row"],["class","col-md-12 text-center mt-4",4,"ngIf"],["src","../../../assets/media/pay-logo.svg","alt","","class","img-fluid",4,"ngIf"],["src","../../../assets/media/reward-cup.svg","alt","","class","img-fluid",4,"ngIf"],["src","../../../assets/media/pay-logo.svg","alt","",1,"img-fluid"],["src","../../../assets/media/reward-cup.svg","alt","",1,"img-fluid"],["src","../../../assets/media/success-logo.svg","alt","",1,"img-fluid","p-success"],[1,"big-font","pb-4"],[1,"col-md-12","text-center","mt-4"],["class","",4,"ngIf"],[1,"text-primary"],[1,""],[1,"row","text-center","p-4","bottom-position"],[1,"col-md-12","text-center"],["class","payme-des",4,"ngIf"],[1,"btn","btn-mm-p",3,"click"],[1,"payme-des"],[1,"row","cont-cent","mt-5"],[1,"text-center","mt-5"],[1,"myr-icon-green","mb-4"],[1,"pt-3"],[1,"payment-succ-des"],[1,"payment-des"],[1,"row","text-center","ms-0","p-4","bottom-position"]],template:function(t,s){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1",2)(3,"i",3),e.\u0275\u0275listener("click",function(){return s.goBack()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4,"\xa0 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,D,4,3,"div",4),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",s.isScreenLoaded))},directives:[c.O5],styles:[".pma[_ngcontent-%COMP%]{padding:10px!important}.pma[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px!important;line-height:24px;font-weight:500;color:#000}.pay-screen[_ngcontent-%COMP%]{z-index:999999999999;background-color:#fff}.bottom-position[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0}.btn-mm-p-disabled[_ngcontent-%COMP%]{background-color:#c4c4c4;font-size:16px;cursor:pointer;border-radius:10px;color:#fff;font-weight:500;padding:9px 104px!important;line-height:19px}.btn-mm-p-disabled[_ngcontent-%COMP%]:hover{opacity:.9}.btn-mm-p[_ngcontent-%COMP%]{background-color:#ad0c62;font-size:16px;cursor:pointer;border-radius:10px;color:#fff;font-weight:500;padding:10px 104px!important;width:100%}.btn-mm-p[_ngcontent-%COMP%]:hover{opacity:.9}.payme-des[_ngcontent-%COMP%]{color:#ad0c62;font-weight:500;font-size:15px;line-height:18px;text-align:center}.myr-icon[_ngcontent-%COMP%]{background-color:#d9d9d9!important;border-radius:67px!important;width:110px;height:110px;margin-left:103px}.myr-icon[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;font-size:50px;line-height:33px;text-align:center;color:#8a8a8a}.myr-icon[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#8a8a8a;font-weight:500;font-size:20px;line-height:24px;text-align:center}.myr-icon-green[_ngcontent-%COMP%]{background-color:#0cad26!important;border-radius:67px!important;width:110px;height:110px;box-shadow:4px 4px 4px #0000001a;margin:0 auto}.myr-icon-green[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;font-size:50px;line-height:33px;text-align:center;color:#f3f2f2}.myr-icon-green[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#f3f2f2;font-weight:500;font-size:20px;line-height:24px;text-align:center}.payment-succ-des[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:25px;text-align:center;color:#ad0c62}.payment-des[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:24px;text-align:center;color:#000}"]}),n})()},{path:"**",redirectTo:"list",pathMatch:"full"}]}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[a.Bz.forChild(A)],a.Bz]}),n})();var T=r(4466);let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,E,T.m]]}),n})()}}]);